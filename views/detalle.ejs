<%- include("template/cabecera",{tituloWeb:'Detalle de mascota'}) %>

    <div class="container">
        <h1>Detalle mascota</h1>
        <% if (error) { %>
            <p>
                <%= mensaje %> 
            </p>
            <a href="/mascotas" class="btn btn-dark btn-block"> Volver al listado de Mascotas</a>
        <% } %>

        <% if (!error) { %>
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">id</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Rasgos</th>
                    <th scope="col">Acci√≥n</th>
                </tr>
                </thead>
                <tbody>
                            <tr>
                                <th scope="row"><%= mascota.id %> </th>
                                <td><%= mascota.Tipo %></td>
                                <td><%= mascota.Nombre %></td>
                                <td><%= mascota.Rasgos %></td>
                                <td>
                                    <button
                                    class="btn btn-danger btn-sm"
                                    data-id="<%= mascota.id %>"
                                  >
                                    Eliminar
                                  </button>
                                </td>
                            </tr>
                </tbody>
            </table>
        <% } %>
    </div> 

<%- include("template/footer") %>

<script>
    const btnEliminar = document.querySelector('.btn-danger')
      btnEliminar.addEventListener('click', async() => {
        console.log(btnEliminar.dataset.id)  
        try {
            const data = await fetch(`/mascotas/${btnEliminar.dataset.id}`, {
              method: 'delete'
            })
            const res = await data.json()
            if(res.estado){
                window.location.href = '/mascotas';
            }else{
                console.log(res)
            }
        } catch (error) {
            console.log(error)
        }
      })
    </script>